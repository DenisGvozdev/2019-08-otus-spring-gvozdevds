<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <TITLE>Моя библиотека</TITLE>
    <script type="text/javascript" src="js/swfobject.js"></script>

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.css">
    <link rel="stylesheet" href="css/style.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/bootstrap-select.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-select.css"/>
    <link rel="stylesheet" href="css/formAddUpdateBook.css">

</head>
<body>
<div class="main">

    <div class="navbar navbar-inverse">
        <div class="navbar-inner">
            <a class="brand" href="/">Моя библиотека</a>
            <ul class="nav nav-pills">
                <li>
                    <form action="/" method="get" class="one">
                        <input type="submit" class="refButton" value="Все книги">
                    </form>
                </li>
                <li>
                    <form action="/info" method="get" class="one">
                        <input type="hidden" value="add"/>
                        <input type="submit" class="refButton" value="Добавить">
                    </form>
                </li>
                <li>
                    <div class="search">
                        <form action="/find" method="get" class="form-inline my-2 my-lg-0">
                            <input name="name" class="form-control mr-sm-2" type="search" placeholder="Название книги"
                                   aria-label="Поиск">
                            <button class="search" id="buttonSearch" type="submit">Найти</button>
                        </form>
                    </div>
                </li>

            </ul>
        </div>
    </div>

    <div class="addBook">

        <div class="bookImage">
            <img id="imagePreview" th:src="${book.imageString}"/>
        </div>

        <div class="bookForm">
            <form id="formCreateUpdateBook" enctype="multipart/form-data" action="#" th:action="${operation}"
                  method="post" th:object="${book}">

                <div class="form-group" hidden="true">
                    <label for="bookId" class="labelInput">ID</label>
                    <input id="bookId" name="bookId" class="inputText" type="text" th:value="${book.id}"/>
                </div>

                <div class="form-group">
                    <label for="name" class="labelInput">Название</label>
                    <input id="name" name="name" class="inputText" type="text" th:value="${book.name}"
                           th:disabled="${show}"/>
                </div>

                <div class="form-group">
                    <label for="description" class="labelInput">Описание</label>
                    <textarea id="description" name="description" rows="2" cols="80"
                              th:field = "${book.description}" th:disabled="${show}"></textarea>
                </div>

                <div class="form-group">
                    <label for="file" class="labelInput">Обложка</label>
                    <input id="file" name="file" type="file" onchange="readURL(this)"
                           th:value="${book.image}" th:disabled="${show}"/>
                </div>

                <div class="form-group">
                    <label for="authorIds" class="labelInput">Авторы</label>
                    <select id="authorIds" name="authorIds" class="selectFields"
                            multiple data-live-search="true" th:disabled="${show}">
                        <option th:each="author : ${book.authors}"
                                th:value="${author.id}"
                                th:selected="${author.selected}"
                                th:text="${author.firstName + ' ' + author.secondName + ' ' + author.thirdName}">
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="genreIds" class="labelInput">Жанры</label>
                    <select id="genreIds" name="genreIds" class="selectFields"
                            multiple data-live-search="true" th:disabled="${show}">
                        <option th:each="genre : ${book.genres}"
                                th:value="${genre.id}"
                                th:selected="${genre.selected}"
                                th:text="${genre.name}">
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="statusId" class="labelInput">Статус</label>
                    <select id="statusId" name="statusId" class="selectFields"
                             th:disabled="${show}">
                        <option th:each="status : ${book.statuses}"
                                th:value="${status.id}"
                                th:selected="${status.selected}"
                                th:text="${status.name}">
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <input type="submit" value="Сохранить" class="inputButtonSave" th:hidden="${show}">
                    <input type="button" value="Закрыть" onclick="window.history.back()" class="inputButtonCancel">
                </div>

            </form>
        </div>

    </div>

    <div class="footer">

    </div>
</div>

<script>
    $(document).ready(function () {
        $('select').selectpicker();
    });
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#imagePreview')
                    .attr('src', e.target.result);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

</body>
</html>